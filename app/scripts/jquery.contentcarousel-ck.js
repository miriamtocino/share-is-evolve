(function(e){var t={navigate:function(t,n,r,i,s){var o=i.scroll,u=1,a=0;if(s.expanded){o=1;u=3;a=s.idxClicked}if(t===1)r.find("div.ca-item:lt("+o+")").each(function(t){e(this).clone(!0).css("left",(s.totalItems-a+t)*s.itemW*u+"px").appendTo(r)});else{var f=r.children().eq(0);r.find("div.ca-item:gt("+(s.totalItems-1-o)+")").each(function(t){e(this).clone(!0).css("left",-(o-t+a)*s.itemW*u+"px").insertBefore(f)})}r.find("div.ca-item").each(function(n){var r=e(this);r.stop().animate({left:t===1?"-="+s.itemW*u*o+"px":"+="+s.itemW*u*o+"px"},i.sliderSpeed,i.sliderEasing,function(){(t===1&&r.position().left<-a*s.itemW*u||t===-1&&r.position().left>(s.totalItems-1-a)*s.itemW*u)&&r.remove();s.isAnimating=!1})})},openItem:function(e,n,r,i){i.idxClicked=n.index();i.winpos=t.getWinPos(n.position().left,i);e.find("div.ca-item").not(n).hide();n.find("div.ca-content-wrapper").css("left",i.itemW+"px").stop().animate({width:i.itemW*2+"px",left:i.itemW+"px"},r.itemSpeed,r.itemEasing).end().stop().animate({left:"0px"},r.itemSpeed,r.itemEasing,function(){i.isAnimating=!1;i.expanded=!0;t.openItems(e,n,r,i)})},openItems:function(n,r,i,s){var o=r.index();n.find("div.ca-item").each(function(n){var r=e(this),i=r.index();if(i!==o){r.css("left",-(o-i)*s.itemW*3+"px").show().find("div.ca-content-wrapper").css({left:s.itemW+"px",width:s.itemW*2+"px"});t.toggleMore(r,!1)}})},toggleMore:function(e,t){t?e.find("a.ca-more").show():e.find("a.ca-more").hide()},closeItems:function(n,r,i,s){var o=r.index();r.find("div.ca-content-wrapper").stop().animate({width:"0px"},i.itemSpeed,i.itemEasing).end().stop().animate({left:s.itemW*(s.winpos-1)+"px"},i.itemSpeed,i.itemEasing,function(){s.isAnimating=!1;s.expanded=!1});t.toggleMore(r,!0);n.find("div.ca-item").each(function(n){var r=e(this),i=r.index();if(i!==o){r.find("div.ca-content-wrapper").css({width:"0px"}).end().css("left",(s.winpos-1-(o-i))*s.itemW+"px").show();t.toggleMore(r,!0)}})},getWinPos:function(e,t){switch(e){case 0:return 1;case t.itemW:return 2;case t.itemW*2:return 3}}},n={init:function(n){if(this.length){var r={sliderSpeed:500,sliderEasing:"easeOutExpo",itemSpeed:500,itemEasing:"easeOutExpo",scroll:1};return this.each(function(){n&&e.extend(r,n);var i=e(this),s=i.find("div.ca-wrapper"),o=s.children("div.ca-item"),u={};u.itemW=o.width();u.totalItems=o.length;u.totalItems>3&&i.prepend('<div class="ca-nav"><span class="ca-nav-prev">Previous</span><span class="ca-nav-next">Next</span></div>');r.scroll<1?r.scroll=1:r.scroll>3&&(r.scroll=3);var a=i.find("span.ca-nav-prev"),f=i.find("span.ca-nav-next");s.css("overflow","hidden");o.each(function(t){e(this).css({position:"absolute",left:t*u.itemW+"px"})});i.find("a.ca-more").live("click.contentcarousel",function(n){if(u.isAnimating)return!1;u.isAnimating=!0;e(this).hide();var i=e(this).closest("div.ca-item");t.openItem(s,i,r,u);return!1});i.find("a.ca-close").live("click.contentcarousel",function(n){if(u.isAnimating)return!1;u.isAnimating=!0;var i=e(this).closest("div.ca-item");t.closeItems(s,i,r,u);return!1});a.bind("click.contentcarousel",function(e){if(u.isAnimating)return!1;u.isAnimating=!0;t.navigate(-1,i,s,r,u)});f.bind("click.contentcarousel",function(e){if(u.isAnimating)return!1;u.isAnimating=!0;t.navigate(1,i,s,r,u)})})}}};e.fn.contentcarousel=function(t){if(n[t])return n[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return n.init.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.contentcarousel")}})(jQuery);